{% load static %}

<div class="row">
  <div class="col-lg-4 col-md-7 col-sm-6">
    <div class="row row-cols-1 g-2">
      <div class="col">
        <div class="card bg-dark">
          <img src="https://автовыхлоп911.рф/wp-content/uploads/2018-lada-kalina-cross-2.jpg" class="card-img-top">
          <div class="card-body">
            <dl class="row lead">
              <dt class="col-sm-6">Марка</dt>
              <dd class="col-sm-6">{{ car.brand }}</dd>
              <dt class="col-sm-6">Модель</dt>
              <dd class="col-sm-6">{{ car.model }}</dd>
              <dt class="col-sm-6">Год выпуска</dt>
              <dd class="col-sm-6">{{ car.release_year }}</dd>
              <dt class="col-sm-6">Цвет</dt>
              <dd class="col-sm-6">{{ car.color }}</dd>
            </dl>
            <a href="#" class="btn btn-primary">Редактировать данные</a>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="col-lg-8 col-md-7 col-sm-6">
    <div class="row">
      <div class="card bg-dark">
        <h2 class="card-title ms-3 mt-4">Заказ услуги</h2>
        <div class="row g-0">
          <div class="col-md-5">
            <div class="card-body">
              <form method="post" hx-post="{% url 'auction_create' %}" hx-headers='{"X-CSRFToken": "{{ csrf_token }}"}' hx-target="#detail-list">
                <div class="row g-3">
                  <div class="col-12">
                    {% regroup services by get_category_display as categories %}
                    <select class="form-select" id="id_chosen_service" name="chosen_service">
                      <option selected>Выбрать услугу</option>
                      {% for category in categories %}
                        <optgroup label="{{ category.grouper }}">
                          {% for service in category.list %}
                            <option value="{{ service.id }}">{{ service }}</option>
                          {% endfor %}
                        </optgroup>
                      {% endfor %}
                    </select>
                  </div>
                  <div class="col-12">
                    <button id="auction_create" class="btn btn-primary btn" type="submit">Искать исполнителя</button>
                  </div>
                </div>
              </form>
            </div>
          </div>
          <div class="col-md-7">
            <div class="card-body" id="detail-list" hx-get="{% url 'auction_list' %}" hx-trigger="load">
            </div>
          </div>
        </div>
      </div>
    </div>
    {% if orders_in_progress %}
      <div class="row mt-5">
        <h2>Заказы в процессе выполнения</h2>
        <div class="row row-cols-1 row-cols-md-2 g-2">
          {% for order in orders_in_progress %}
            <div class="col">
              <div class="card bg-dark">
                <div class="card-body">
                  <h5 class="card-title"><span class="badge bg-secondary">{{ order.auction.chosen_service.get_category_display }}</span> {{ order.auction.chosen_service.name }}</h5>
                  <h6 class="card-text">Выполняет компания <a href="">{{ order.company }}</a></h6>
                </div>
                <div class="card-footer">
                  <small class="text-muted">{{ order.auction.timer_end }}</small>
                </div>
              </div>
            </div>
          {% endfor %}
        </div>
      </div>
    {% endif %}
    {% if completed_orders %}
      <div class="row mt-5">
        <h2>Выполненные заказы</h2>
        <div class="row row-cols-1 row-cols-md-2 g-2">
          {% for order in completed_orders %}
            <div class="col">
              <div class="card bg-dark">
                <div class="card-body">
                  <h5 class="card-title"><span class="badge bg-secondary">{{ order.auction.chosen_service.get_category_display }}</span> {{ order.auction.chosen_service.name }}</h5>
                  <h6 class="card-text"><strong>Исполнитель:</strong> <a href="">{{ order.company }}</a></h6>
                </div>
                <div class="card-footer">
                  <small class="text-muted">Выполнено {{ order.auction.timer_end }}</small>
                </div>
              </div>
            </div>
          {% endfor %}
        </div>
      </div>
    {% endif %}
  </div>
</div>
  
